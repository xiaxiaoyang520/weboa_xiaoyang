<div>
	<!-- BEGIN PAGE HEADER-->
	<h3 class="page-title" data-ng-bind="$state.current.data.pageTitle"></h3>
	 <div data-ncy-breadcrumb></div>
</div>
	<div class="row">
		<div class="col-md-12">
			<div class="portlet light bordered">
				<div class="portlet-title">
					<div class="caption font-green-sharp">
						<i class="icon-equalizer font-green-sharp"></i> <span
							class="caption-subject bold uppercase">添加新小品会</span>
					</div>
				</div>
				<div class="portlet-body form">
					<form name="addForm" class="form-horizontal"
						novalidate="novalidate">
					<div class="form-body">
						<div class="form-group">
							<label class="col-md-2 control-label">活动城市：<span class="required">*</span></label>
							<div class="col-md-8 ">
								<div id="city-select" class="row">
									<div class="col-md-3">
										<select
											class="form-control prov data-ng-pristine data-ng-untouched data-ng-valid"
											data-ng-model="vo.city.province"
											data-value="{{vo.city.province}}"
											data-ng-change="vo.city.city='';vo.city.county=''; changeCity()">
											<option value="">请选择</option>
										</select>
									</div>
									<div class="col-md-3">
										<select
											class="form-control city data-ng-pristine data-ng-untouched data-ng-valid"
											data-ng-model="vo.city.city" data-value="{{vo.city.city}}"
											data-ng-change="vo.county=''; changeCity()"
											data-ng-disabled="vo.city==null||vo.city.province==''||vo.city.province==null"  >
										</select>
									</div>
									<div class="col-md-3">
										<select
											class="form-control dist data-ng-pristine data-ng-untouched data-ng-valid"
											data-ng-model="vo.city.county"
											data-value="{{vo.city.county}}"
											data-ng-disabled="vo.city==null||vo.city.city==''||vo.city.city==null"  >
										</select>
									</div>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-2 control-label">小品会名称：<span class="required">*</span></label>
							<div class="col-md-6">
								<input type="text" required name="tastingName"
									class="form-control data-ng-pristine data-ng-untouched data-ng-valid"
									placeholder="请输入小品会名称" data-ng-model="vo.name">
								<div class="error-messages ng-scope ng-active" data-ng-messages="addForm.tastingName.$error" data-ng-if="addForm.tastingName.$touched">
									<div class="ng-scope" data-ng-message="required">小品会名称是必填项！</div>
							  </div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-2 control-label">活动时间：<span class="required">* </span></label>
							<div class="col-md-6">
								<div class="input-group input-daterange">
									<input name="pBeginDate" id="beginDate"
										ejp-dateformat="yyyy-MM-dd HH:mm"  class="form-control ng-pristine ng-untouched ng-valid datetime-picker" type="text" ng-model="vo.beginTime"  required> 
									<span class="input-group-addon">到</span> 
									<input name="pEndDate" id="endDate" ejp-dateformat="yyyy-MM-dd HH:mm"  class="form-control ng-pristine ng-untouched ng-valid datetime-picker"
										type="text" ng-model="vo.endTime"  required>
								</div>
								<div class="error-messages ng-scope ng-active" ng-messages="addForm.pBeginDate.$error"  ng-if="addForm.pBeginDate.$touched || showValidError" >
									<div class="ng-scope" ng-message="required">必须选择活动开始时间</div>
								</div>
								<div class="error-messages ng-scope ng-active"  ng-messages="addForm.pEndDate.$error"  ng-if="addForm.pEndDate.$touched || showValidError">
									<div class="ng-scope" ng-message="required">必须选择活动结束时间</div>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-2 control-label"> 产品sku：<span
								class="required">*</span>
							</label>
							<div class="col-md-4">
								<a data-toggle="modal"
									data-ng-click="init(vo)" class="btn blue">
									<i class="fa fa-plus"></i> 添加产品sku
								</a>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-9 col-md-offset-2">
								<div class="table-scrollable">
									<table class="table table-striped table-bordered table-hover">
										<thead>
											<tr class="heading">
												<th>序号</th>
												<th>产品规格名称</th>
												<th>产品销售模式</th>
												<th>指导价</th>
												<th>状态</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody>
											<tr class="odd gradeX" ng-repeat="item in productSkuList">
												<td ng-bind="$index + 1"></td>
												<td ng-bind="item.name"></td>
												<td ng-bind="item.saleMode"></td>
												<td >
													<span ng-hide="item.guidePrice==null || item.guidePriceUnit==null "  ng-bind="item.guidePrice+'/'+item.guidePriceUnit" ></span>
												</td>
												<td ng-bind="item.state"></td>
												<td  >
													<button  ng-click = "remove(item.id)"  class="btn btn-default"> 移除 </button>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
					<div class="form-actions">
							<div class="row">
								<div class="col-md-offset-2 col-md-4">
									<button class="btn blue" data-ng-click="tastingSubmit()"
										data-ejp-no-more-submit data-ng-disabled="addForm.$invalid">
										<i class="fa fa fa-check"></i> 保存
									</button>
									<a href="#/tasting_list.html" class="btn default"><i class="fa fa-chevron-circle-left"></i> 返回</a>
								</div>
							</div>
						</div>
					</form>
					<!-- END FORM-->
				</div>
			</div>
		</div>
	</div>
	<!-- END PAGE CONTENT-->
<script>
$("#beginDate").datetimepicker({
	language:'cn',
	rtl:Metronic.isRTL(),
    format: "yyyy-mm-dd hh:ii",
    autoclose: true,
    todayBtn: true,
    minuteStep:5,
    pickerPosition: "bottom-left"
}).on("click",function(ev){
    $("#beginDate").datetimepicker("setEndDate", $("#endDate").val());
});
$("#endDate").datetimepicker({
	language:'cn',
	rtl:Metronic.isRTL(),
    format: "yyyy-mm-dd hh:ii",
    autoclose: true,
    minuteStep:5,
    todayBtn: true,
    pickerPosition: "bottom-left"
}).on("click", function (ev) {
    $("#endDate").datetimepicker("setStartDate", $("#beginDate").val());
});
</script>


</div>

